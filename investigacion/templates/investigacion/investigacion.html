{% extends "base.html" %}
{% load static %}

{% block title %} Investigaciones realizadas {% endblock %}

{% block content %}

<div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="4000">
    <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="0" class="active"
            aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="2" aria-label="Slide 3"></button>
    </div>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <div class="image-container">
                <img src="{{ carrusel.imagen1.url }}" alt="Descripción de la imagen">
                <div class="overlay"></div>
            </div>
            <div class="carousel-caption text-white">
                <h2 class="text-uppercase fw-bold fs-1">{{ carrusel.titulo }}</h2>
                <p class="font-monospace fs-5">{{ carrusel.texto1 }}</p>
                {% if user.is_superuser or user.is_staff %}
                <a class="btn btn-white text-white" href="{% url 'investigacion_editar_carrusel' %}" role="button">Editar carrusel</a>
                {% endif %}
            </div>
        </div>
        <div class="carousel-item">
            <div class="image-container">
                <img src="{{ carrusel.imagen2.url }}" class="d-block w-100" alt="...">
                <div class="overlay"></div>
            </div>
            <div class="carousel-caption text-white">
                <p class="font-monospace fs-5">{{ carrusel.texto2 }}</p>
            </div>
        </div>
        <div class="carousel-item">
            <div class="image-container">
                <img src="{{ carrusel.imagen3.url }}" class="d-block w-100" alt="...">
                <div class="overlay"></div>
            </div>
            <div class="carousel-caption text-white">
                <p class="font-monospace fs-5">{{ carrusel.texto3 }}</p>
            </div>
        </div>
    </div>

    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>

<section class="vh-100"
    style="background: linear-gradient(90deg, rgba(255,255,255,1) 0%, rgba(255,255,255,1) 25%, rgba(238,238,238,1) 75%, rgba(222,222,222,1) 100%);">
    <div class="container">

        <div class="d-flex justify-content-center align-items-center">
            <!-- Seccion de texto-->
            <div class="col-md-6 mt-5">
                <div class="card-body text-center mt-5">
                    <h4 class="mb-3">INVESTIGACIÓN</h4>
                    <hr class="border border-primary border-2 shadow opacity-75 mx-auto" style="width: 40px;">
                    <p>En esta sección se encuentran los resultados obtenidos durante el desarrollo del proyecto
                        de investigación titulado Docking molecular en la búsqueda de inhibidores potenciales de la
                        oligomerización de α-sinucleina en la enfermedad de Parkinson y otras investigaciones.</p>
                    <a class="btn btn-outline-primary mt-2 shadow" href="#seccion1" role="button">Ver más</a>
                </div>

            </div>
            <!-- Fin Seccion de texto-->

            <!-- Seccion imagen-->
            <div class="col-sm-8 col-md-6">
                <div class="card-body text-center mt-5 mx-auto custom-photo"
                    style="display: flex; justify-content: center; align-items: center;">
                    <img src="{% static 'investigacion/images/microscopio.jpg'%}"
                        class="img-fluid border border-3 border-secondary border-opacity-75 shadow text-center rounded-pill"
                        alt="...">
                </div>
            </div>
            <!-- Fin Seccion imagen-->
        </div>

    </div>
</section>

<section id="seccion1" class="min-vh-100" style="background: #141820">
    <div class="container">

        <div class="d-flex justify-content-center align-items-center py-5">
            <!-- Seccion imagen-->
            <div class="col-sm-8 col-md-6">
                <div class="card-body text-center mt-5 mx-auto custom-photo"
                    style="display: flex; justify-content: center; align-items: center;">
                    <img src="{% static 'investigacion/images/seccion1.jpg'%}"
                        class="img-fluid border border-3 border-white  shadow text-center rounded-pill" alt="...">
                </div>
            </div>
            <!-- Fin Seccion imagen-->

            <!-- Seccion de texto-->
            <div class="col-md-6 mt-5">
                <div class="card-body text-center text-white">
                    <h4 class="mb-3">CONTENIDOS VIRTUALES</h4>
                    <p>El Proyecto Alpha-Sinucleína investiga la relación clave entre la proteína alpha-sinucleína y la
                        enfermedad de Parkinson. Mientras tanto, la familia Cry11 de Bacillus thuringiensis ofrece
                        proteínas insecticidas que desempeñan un papel vital en el control de plagas agrícolas,
                        especialmente mosquitos transmisores de enfermedades como el dengue y la malaria.</p>
                </div>
                <div class="card-body text-white mt-5">
                    <div class="row d-flex gap-3 justify-content-center  text-center">
                        {% for categoria in categorias %}
                        <div class="col-md-5 col-sm-12">
                            <h5 class="text-uppercase">
                                {% if categoria.nombre_categoria == 'Alpha' %}
                                Proyecto alpha-sinucleina
                                {% elif categoria.nombre_categoria == 'Cry11' %}
                                Familia cry11 de bacillus thuringiensis
                                {% elif categoria.nombre_categoria == 'Otros' %}
                                Otros
                                {% endif %}
                            </h5>
                            <hr class="border border-custom border-2 shadow opacity-75 mx-auto" style="width: 40px;">
                            {% if categoria.investigacion_set.exists %}
                            {% for investigacion in categoria.investigacion_set.all %}
                            {{ investigacion.nombre }} <br>
                            {% endfor %}
                            {% else %}
                            Sin resultados
                            {% endif %}
                        </div>
                        {% endfor %}
                        {% if user.is_superuser or user.is_staff %}
                        <div class="col-12">
                            <a type="button" href="{% url 'investigacion_crear' %}" class="btn btn-light mt-3">Agregar
                                una nueva investigación</a>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            <!-- Fin Seccion de texto-->
        </div>

    </div>
</section>

<!-- Seccion para Alpha -->
{% for categoria in categorias %}
{% if categoria.nombre_categoria == "Alpha" %}
{% for investigacion in categoria.investigacion_set.all %}
<section class="min-vh-100 pb-5">
    <div class="container">
        <div class="row justify-content-center">
            <!-- Seccion de texto-->
            <div class="col-md-6 mt-5">
                <div class="card-body text-start mt-5">
                    <h4 class="mb-3">{{ investigacion.nombre }} </h4>
                    <hr class="border border-warning border-2 shadow opacity-75 ms-0" style="width: 40px;">
                    <p>{{ investigacion.descrip|linebreaks }}</p>

                    <p class="text-center mt-5">Resultados para {{ investigacion.nombre }}</p>
                    <hr class="border border-dark border-2 shadow opacity-75 mx-auto" style="width: 40px;">

                    <div class="row text-center mt-4">

                        {% if user.is_authenticated %}

                        {% if investigacion.imagen_tif %}
                        <!-- Boton modal Imagen -->
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Visualizar imagen">
                            <button type="button" class="btn btn-dark" data-bs-toggle="modal"
                                data-bs-target="#exampleModal_{{ investigacion.id }}">Imagen
                                TIF</button>
                        </div>
                        {% else %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Imagen no disponible">
                            <button type="button" href="{{ investigacion.imagen_tif }}" class="btn btn-dark"
                                disabled>Imagen
                                TIF</button>
                        </div>
                        {% endif %}

                        {% if investigacion.pdf %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Descargar PDF">
                            <a type="button" href="{{ investigacion.pdf.url }}" class="btn btn-dark" target="_blank">
                                {{ investigacion.nombre }} PDF</a>
                        </div>
                        {% else %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="PDF no disponible">
                            <button type="button" href="{{ investigacion.pdf }}" class="btn btn-dark" disabled>
                                {{ investigacion.nombre }} PDF</button>
                        </div>
                        {% endif %}

                        {% if investigacion.mejores_pdf %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Mejores PDF">
                            <a type="button" href="{{ investigacion.mejores_pdf.url }}" class="btn btn-dark"
                                target="_blank">Mejores
                                PDF</a>
                        </div>
                        {% else %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Mejores PDF no disponible">
                            <button type="button" href="{{ investigacion.mejores_pdf }}" class="btn btn-dark"
                                disabled>Mejores PDF</button>
                        </div>
                        {% endif %}

                        {% else %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Inicia sesión para poder interactuar">
                            <a href="{% url 'signin' %}" type="button" class="btn btn-dark">Imagen TIF</a>
                        </div>
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Inicia sesión para poder interactuar">
                            <a href="{% url 'signin' %}" type="button" class="btn btn-dark">Nativa PDF</a>
                        </div>
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Inicia sesión para poder interactuar">
                            <a href="{% url 'signin' %}" type="button" class="btn btn-dark">Mejores PDF</a>
                        </div>
                        {% endif %}

                    </div>

                </div>

                {% if user.is_supersu or user.is_staff %}
                <div class="d-flex justify-content-center my-3">
                    <div class="dropdown col-4 my-3">
                        <button class="btn btn-white dropdown-toggle" type="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Editar investigación
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item"
                                    href="{% url 'investigacion_editar' investigacion.nombre %}">Editar
                                    {{ investigacion.nombre }}</a>
                            </li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item text-danger"
                                    href="{% url 'investigacion_eliminar' investigacion.nombre %}">Eliminar
                                    {{ investigacion.nombre }}</a>
                            </li>
                        </ul>
                    </div>
                </div>
                {% endif %}
            </div>

            <!-- Fin Seccion de texto-->

            <!-- Seccion imagen y extras -->
            <div class="col-sm-12 col-md-6">
                <div class="card-body text-center mt-5 mx-auto custom-photo d-flex flex-column justify-content-center">
                    <img src="{{ investigacion.imagen_investigacion.url }}"
                        class="img-fluid border border-2 border-secondary shadow-lg text-center rounded-5" alt="..."
                        style="max-width: 100%; height: auto;">
                    <div class="row mt-5 d-flex justify-content-center align-items-center">
                        {% if investigacion.imagen_extra_1 %}
                        {% if user.is_authenticated %}
                        <div class="col-4 d-flex justify-content-center">
                            <button class="btn btn-white" data-bs-toggle="modal"
                                data-bs-target="#exampleModaAlphaExtra1_{{ investigacion.id }}">
                                <img src="{{ investigacion.imagen_extra_1.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </button>
                        </div>
                        {% else %}
                        <div class="col-4 d-flex justify-content-center">
                            <a class="btn btn-white" href="{% url 'signin' %}">
                                <img src="{{ investigacion.imagen_extra_1.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </a>
                        </div>
                        {% endif %}
                        {% endif %}
                        {% if investigacion.imagen_extra_2 %}
                        {% if user.is_authenticated %}
                        <div class="col-4 d-flex justify-content-center">
                            <button class="btn btn-white" data-bs-toggle="modal"
                                data-bs-target="#exampleModaAlphaExtra2_{{ investigacion.id }}">
                                <img src="{{ investigacion.imagen_extra_2.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </button>
                        </div>
                        {% else %}
                        <div class="col-4 d-flex justify-content-center">
                            <a class="btn btn-white" href="{% url 'signin' %}">
                                <img src="{{ investigacion.imagen_extra_2.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </a>
                        </div>
                        {% endif %}
                        {% endif %}
                        {% if investigacion.imagen_extra_3 %}
                        {% if user.is_authenticated %}
                        <div class="col-4 d-flex justify-content-center">
                            <button class="btn btn-white" data-bs-toggle="modal"
                                data-bs-target="#exampleModaAlphaExtra3_{{ investigacion.id }}">
                                <img src="{{ investigacion.imagen_extra_3.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </button>
                        </div>
                        {% else %}
                        <div class="col-4 d-flex justify-content-center">
                            <a class="btn btn-white" href="{% url 'signin' %}">
                                <img src="{{ investigacion.imagen_extra_3.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </a>
                        </div>
                        {% endif %}
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Fin Seccion imagen-->
        </div>

    </div>

    <!-- Modals -->

    <!-- Modal para imagen tif -->
    {% if investigacion.imagen_tif %}
    <div class="modal fade" id="exampleModal_{{ investigacion.id }}" tabindex="-1" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Imagen</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="{{ investigacion.imagen_tif.url }}" alt=""
                        class="border border-1 rounded-4 shadow col-sm-12 col-md-7"
                        style="max-width: 100%; height: auto;">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <a type="button" href="{{ investigacion.imagen_tif.url }}" class="btn btn-success"
                        download>Descargar</a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Modal para imagen extra 1 -->
    {% if investigacion.imagen_extra_1 %}
    <div class="modal fade" id="exampleModaAlphaExtra1_{{ investigacion.id }}" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Imagen</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="{{ investigacion.imagen_extra_1.url }}" alt=""
                        class="border border-1 rounded-4 shadow col-sm-12 col-md-7"
                        style="max-width: 100%; height: auto;">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <a type="button" href="{{ investigacion.imagen_extra_1.url }}" class="btn btn-success"
                        download>Descargar</a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Modal para imagen extra 2 -->
    {% if investigacion.imagen_extra_2 %}
    <div class="modal fade" id="exampleModaAlphaExtra2_{{ investigacion.id }}" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Imagen</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="{{ investigacion.imagen_extra_2.url }}" alt=""
                        class="border border-1 rounded-4 shadow col-sm-12 col-md-7"
                        style="max-width: 100%; height: auto;">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <a type="button" href="{{ investigacion.imagen_extra_2.url }}" class="btn btn-success"
                        download>Descargar</a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Modal para imagen extra 3 -->
    {% if investigacion.imagen_extra_3 %}
    <div class="modal fade" id="exampleModaAlphaExtra3_{{ investigacion.id }}" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Imagen</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="{{ investigacion.imagen_extra_3.url }}" alt=""
                        class="border border-1 rounded-4 shadow col-sm-12 col-md-7"
                        style="max-width: 100%; height: auto;">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <a type="button" href="{{ investigacion.imagen_extra_3.url }}" class="btn btn-success"
                        download>Descargar</a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

</section>
{% endfor %}
{% endif %}
{% endfor %}

<!-- Seccion para Cry11 -->
{% for categoria in categorias %}
{% if categoria.nombre_categoria == "Cry11" %}
{% for investigacion in categoria.investigacion_set.all %}
<section class="min-vh-100 pb-5">
    <div class="container">

        <div class="row justify-content-center">

            <!-- Seccion imagen y extras -->
            <div class="col-sm-12 col-md-6">
                <div class="card-body text-center mt-5 mx-auto custom-photo d-flex flex-column justify-content-center">
                    <img src="{{ investigacion.imagen_investigacion.url }}"
                        class="img-fluid border border-2 border-secondary shadow-lg text-center rounded-5" alt="..."
                        style="max-width: 100%; height: auto;">
                    <div class="row mt-5 d-flex justify-content-center align-items-center">
                        {% if investigacion.imagen_extra_1 %}
                        {% if user.is_authenticated %}
                        <div class="col-4 d-flex justify-content-center">
                            <button class="btn btn-white" data-bs-toggle="modal"
                                data-bs-target="#exampleModaCryExtra1_{{ investigacion.id }}">
                                <img src="{{ investigacion.imagen_extra_1.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </button>
                        </div>
                        {% else %}
                        <div class="col-4 d-flex justify-content-center">
                            <a class="btn btn-white" href="{% url 'signin' %}">
                                <img src="{{ investigacion.imagen_extra_1.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </a>
                        </div>
                        {% endif %}
                        {% endif %}
                        {% if investigacion.imagen_extra_2 %}
                        {% if user.is_authenticated %}
                        <div class="col-4 d-flex justify-content-center">
                            <button class="btn btn-white" data-bs-toggle="modal"
                                data-bs-target="#exampleModaCryExtra2_{{ investigacion.id }}">
                                <img src="{{ investigacion.imagen_extra_2.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </button>
                        </div>
                        {% else %}
                        <div class="col-4 d-flex justify-content-center">
                            <a class="btn btn-white" href="{% url 'signin' %}">
                                <img src="{{ investigacion.imagen_extra_2.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </a>
                        </div>
                        {% endif %}
                        {% endif %}
                        {% if investigacion.imagen_extra_3 %}
                        {% if user.is_authenticated %}
                        <div class="col-4 d-flex justify-content-center">
                            <button class="btn btn-white" data-bs-toggle="modal"
                                data-bs-target="#exampleModaCryExtra3_{{ investigacion.id }}">
                                <img src="{{ investigacion.imagen_extra_3.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </button>
                        </div>
                        {% else %}
                        <div class="col-4 d-flex justify-content-center">
                            <a class="btn btn-white" href="{% url 'signin' %}">
                                <img src="{{ investigacion.imagen_extra_3.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </a>
                        </div>
                        {% endif %}
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Fin Seccion imagen-->

            <!-- Seccion de texto-->
            <div class="col-md-6 mt-5">
                <div class="card-body text-start mt-5">
                    <h4 class="mb-3">{{ investigacion.nombre }}</h4>
                    <hr class="border border-primary border-2 shadow opacity-75 ms-0" style="width: 40px;">
                    <p>{{ investigacion.descrip|linebreaks }}
                    </p>

                    <p class="text-center mt-5">Resultados para {{ investigacion.nombre }}</p>
                    <hr class="border border-dark border-2 shadow opacity-75 mx-auto" style="width: 40px;">

                    <div class="row text-center mt-4">

                        {% if user.is_authenticated %}

                        {% if investigacion.imagen_tif %}
                        <!-- Boton modal Imagen -->
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Visualizar imagen">
                            <button type="button" class="btn btn-dark" data-bs-toggle="modal"
                                data-bs-target="#exampleModalCryTif_{{ investigacion.id }}">Imagen
                                TIF</button>
                        </div>
                        {% else %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Imagen no disponible">
                            <button type="button" href="{{ investigacion.imagen_tif }}" class="btn btn-dark"
                                disabled>Imagen
                                TIF</button>
                        </div>
                        {% endif %}

                        {% if investigacion.pdf %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Descargar PDF">
                            <a type="button" href="{{ investigacion.pdf.url }}" class="btn btn-dark" target="_blank">
                                {{ investigacion.nombre }} PDF</a>
                        </div>
                        {% else %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="PDF no disponible">
                            <button type="button" href="{{ investigacion.pdf }}" class="btn btn-dark" disabled>
                                {{ investigacion.nombre }} PDF</button>
                        </div>
                        {% endif %}

                        {% if investigacion.mejores_pdf %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Mejores PDF">
                            <a type="button" href="{{ investigacion.mejores_pdf.url }}" class="btn btn-dark"
                                target="_blank">Mejores
                                PDF</a>
                        </div>
                        {% else %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Mejores PDF no disponible">
                            <button type="button" href="{{ investigacion.mejores_pdf }}" class="btn btn-dark"
                                disabled>Mejores PDF</button>
                        </div>
                        {% endif %}

                        {% else %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Inicia sesión para poder interactuar">
                            <a href="{% url 'signin' %}" type="button" class="btn btn-dark">Imagen TIF</a>
                        </div>
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Inicia sesión para poder interactuar">
                            <a href="{% url 'signin' %}" type="button" class="btn btn-dark">A30P PDF</a>
                        </div>
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Inicia sesión para poder interactuar">
                            <a href="{% url 'signin' %}" type="button" class="btn btn-dark">Mejores PDF</a>
                        </div>
                        {% endif %}

                    </div>

                </div>
                {% if user.is_supersu or user.is_staff %}
                <div class="d-flex justify-content-center my-3">
                    <div class="dropdown col-4 my-3">
                        <button class="btn btn-white dropdown-toggle" type="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Editar investigación
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item"
                                    href="{% url 'investigacion_editar' investigacion.nombre %}">Editar
                                    {{ investigacion.nombre }}</a>
                            </li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item text-danger"
                                    href="{% url 'investigacion_eliminar' investigacion.nombre %}">Eliminar
                                    {{ investigacion.nombre }}</a>
                            </li>
                        </ul>
                    </div>
                </div>
                {% endif %}
            </div>
            <!-- Fin Seccion de texto-->
        </div>

    </div>

    <!-- Modals -->

    <!-- Modal para imagen tif -->
    {% if investigacion.imagen_tif %}
    <div class="modal fade" id="exampleModalCryTif_{{ investigacion.id }}" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Imagen</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="{{ investigacion.imagen_tif.url }}" alt=""
                        class="border border-1 rounded-4 shadow col-sm-12 col-md-7"
                        style="max-width: 100%; height: auto;">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <a type="button" href="{{ investigacion.imagen_tif.url }}" class="btn btn-success"
                        download>Descargar</a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Modal para imagen extra 1 -->
    {% if investigacion.imagen_extra_1 %}
    <div class="modal fade" id="exampleModaCryExtra1_{{ investigacion.id }}" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Imagen</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="{{ investigacion.imagen_extra_1.url }}" alt=""
                        class="border border-1 rounded-4 shadow col-sm-12 col-md-7"
                        style="max-width: 100%; height: auto;">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <a type="button" href="{{ investigacion.imagen_extra_1.url }}" class="btn btn-success"
                        download>Descargar</a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Modal para imagen extra 2 -->
    {% if investigacion.imagen_extra_2 %}
    <div class="modal fade" id="exampleModaCryExtra2_{{ investigacion.id }}" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Imagen</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="{{ investigacion.imagen_extra_2.url }}" alt=""
                        class="border border-1 rounded-4 shadow col-sm-12 col-md-7"
                        style="max-width: 100%; height: auto;">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <a type="button" href="{{ investigacion.imagen_extra_2.url }}" class="btn btn-success"
                        download>Descargar</a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Modal para imagen extra 3 -->
    {% if investigacion.imagen_extra_3 %}
    <div class="modal fade" id="exampleModaCryExtra3_{{ investigacion.id }}" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Imagen</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="{{ investigacion.imagen_extra_3.url }}" alt=""
                        class="border border-1 rounded-4 shadow col-sm-12 col-md-7"
                        style="max-width: 100%; height: auto;">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <a type="button" href="{{ investigacion.imagen_extra_3.url }}" class="btn btn-success"
                        download>Descargar</a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

</section>
{% endfor %}
{% endif %}
{% endfor %}

<!-- Seccion para otros -->
{% for categoria in categorias %}
{% if categoria.nombre_categoria == "Otros" %}
{% for investigacion in categoria.investigacion_set.all %}
<section class="min-vh-100 pb-5">
    <div class="container">
        <div class="row justify-content-center">
            <!-- Seccion de texto-->
            <div class="col-md-6 mt-5">
                <div class="card-body text-start mt-5">
                    <h4 class="mb-3">{{ investigacion.nombre }}</h4>
                    <hr class="border border-danger border-2 shadow opacity-75 ms-0" style="width: 40px;">
                    <p>{{ investigacion.descrip|linebreaks }}</p>

                    <p class="text-center mt-5">Resultados para {{ investigacion.nombre }}</p>
                    <hr class="border border-dark border-2 shadow opacity-75 mx-auto" style="width: 40px;">

                    <div class="row text-center mt-4">

                        {% if user.is_authenticated %}

                        {% if investigacion.imagen_tif %}
                        <!-- Boton modal Imagen -->
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Visualizar imagen">
                            <button type="button" class="btn btn-dark" data-bs-toggle="modal"
                                data-bs-target="#exampleModal2_{{ investigacion.id }}">Imagen
                                TIF</button>
                        </div>
                        {% else %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Imagen no disponible">
                            <button type="button" href="{{ investigacion.imagen_tif }}" class="btn btn-dark"
                                disabled>Imagen
                                TIF</button>
                        </div>
                        {% endif %}

                        {% if investigacion.pdf %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Descargar PDF">
                            <a type="button" href="{{ investigacion.pdf.url }}" class="btn btn-dark" target="_blank">
                                {{ investigacion.nombre }} PDF</a>
                        </div>
                        {% else %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="PDF no disponible">
                            <button type="button" href="{{ investigacion.pdf }}" class="btn btn-dark" disabled>
                                {{ investigacion.nombre }} PDF</button>
                        </div>
                        {% endif %}

                        {% if investigacion.mejores_pdf %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Mejores PDF">
                            <a type="button" href="{{ investigacion.mejores_pdf.url }}" class="btn btn-dark"
                                target="_blank">Mejores
                                PDF</a>
                        </div>
                        {% else %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Mejores PDF no disponible">
                            <button type="button" href="{{ investigacion.mejores_pdf }}" class="btn btn-dark"
                                disabled>Mejores PDF</button>
                        </div>
                        {% endif %}

                        {% else %}
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Inicia sesión para poder interactuar">
                            <a href="{% url 'signin' %}" type="button" class="btn btn-dark">Imagen TIF</a>
                        </div>
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Inicia sesión para poder interactuar">
                            <a href="{% url 'signin' %}" type="button" class="btn btn-dark">Nativa PDF</a>
                        </div>
                        <div class="col" data-bs-toggle="tooltip" data-bs-placement="bottom"
                            data-bs-title="Inicia sesión para poder interactuar">
                            <a href="{% url 'signin' %}" type="button" class="btn btn-dark">Mejores PDF</a>
                        </div>
                        {% endif %}

                    </div>
                </div>
                {% if user.is_supersu or user.is_staff %}
                <div class="d-flex justify-content-center my-3">
                    <div class="dropdown col-4 my-3">
                        <button class="btn btn-white dropdown-toggle" type="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Editar investigación
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item"
                                    href="{% url 'investigacion_editar' investigacion.nombre %}">Editar
                                    {{ investigacion.nombre }}</a>
                            </li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item text-danger"
                                    href="{% url 'investigacion_eliminar' investigacion.nombre %}">Eliminar
                                    {{ investigacion.nombre }}</a>
                            </li>
                        </ul>
                    </div>
                </div>
                {% endif %}
            </div>

            <!-- Fin Seccion de texto-->

            <!-- Seccion imagen y extras -->
            <div class="col-sm-12 col-md-6">
                <div class="card-body text-center mt-5 mx-auto custom-photo d-flex flex-column justify-content-center">
                    <img src="{{ investigacion.imagen_investigacion.url }}"
                        class="img-fluid border border-2 border-secondary shadow-lg text-center rounded-5" alt="..."
                        style="max-width: 100%; height: auto;">
                    <div class="row mt-5 d-flex justify-content-center align-items-center">
                        {% if investigacion.imagen_extra_1 %}
                        {% if user.is_authenticated %}
                        <div class="col-4 d-flex justify-content-center">
                            <button class="btn btn-white" data-bs-toggle="modal"
                                data-bs-target="#exampleModaExtra1_{{ investigacion.id }}">
                                <img src="{{ investigacion.imagen_extra_1.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </button>
                        </div>
                        {% else %}
                        <div class="col-4 d-flex justify-content-center">
                            <a class="btn btn-white" href="{% url 'signin' %}">
                                <img src="{{ investigacion.imagen_extra_1.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </a>
                        </div>
                        {% endif %}
                        {% endif %}
                        {% if investigacion.imagen_extra_2 %}
                        {% if user.is_authenticated %}
                        <div class="col-4 d-flex justify-content-center">
                            <button class="btn btn-white" data-bs-toggle="modal"
                                data-bs-target="#exampleModaExtra2_{{ investigacion.id }}">
                                <img src="{{ investigacion.imagen_extra_2.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </button>
                        </div>
                        {% else %}
                        <div class="col-4 d-flex justify-content-center">
                            <a class="btn btn-white" href="{% url 'signin' %}">
                                <img src="{{ investigacion.imagen_extra_2.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </a>
                        </div>
                        {% endif %}
                        {% endif %}
                        {% if investigacion.imagen_extra_3 %}
                        {% if user.is_authenticated %}
                        <div class="col-4 d-flex justify-content-center">
                            <button class="btn btn-white" data-bs-toggle="modal"
                                data-bs-target="#exampleModaExtra3_{{ investigacion.id }}">
                                <img src="{{ investigacion.imagen_extra_3.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </button>
                        </div>
                        {% else %}
                        <div class="col-4 d-flex justify-content-center">
                            <a class="btn btn-white" href="{% url 'signin' %}">
                                <img src="{{ investigacion.imagen_extra_3.url }}"
                                    class="border border-2 rounded-4 shadow" alt="" style="width: 130px;">
                            </a>
                        </div>
                        {% endif %}
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Fin Seccion imagen-->
        </div>

    </div>

    <!-- Modals -->

    <!-- Modal para imagen tif -->
    {% if investigacion.imagen_tif %}
    <div class="modal fade" id="exampleModal2_{{ investigacion.id }}" tabindex="-1" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Imagen</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="{{ investigacion.imagen_tif.url }}" alt=""
                        class="border border-1 rounded-4 shadow col-sm-12 col-md-7"
                        style="max-width: 100%; height: auto;">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <a type="button" href="{{ investigacion.imagen_tif.url }}" class="btn btn-success"
                        download>Descargar</a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Modal para imagen extra 1 -->
    {% if investigacion.imagen_extra_1 %}
    <div class="modal fade" id="exampleModaExtra1_{{ investigacion.id }}" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Imagen</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="{{ investigacion.imagen_extra_1.url }}" alt=""
                        class="border border-1 rounded-4 shadow col-sm-12 col-md-7"
                        style="max-width: 100%; height: auto;">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <a type="button" href="{{ investigacion.imagen_extra_1.url }}" class="btn btn-success"
                        download>Descargar</a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Modal para imagen extra 2 -->
    {% if investigacion.imagen_extra_2 %}
    <div class="modal fade" id="exampleModaExtra2_{{ investigacion.id }}" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Imagen</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="{{ investigacion.imagen_extra_2.url }}" alt=""
                        class="border border-1 rounded-4 shadow col-sm-12 col-md-7"
                        style="max-width: 100%; height: auto;">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <a type="button" href="{{ investigacion.imagen_extra_2.url }}" class="btn btn-success"
                        download>Descargar</a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Modal para imagen extra 3 -->
    {% if investigacion.imagen_extra_3 %}
    <div class="modal fade" id="exampleModaExtra3_{{ investigacion.id }}" tabindex="-1"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Imagen</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="{{ investigacion.imagen_extra_3.url }}" alt=""
                        class="border border-1 rounded-4 shadow col-sm-12 col-md-7"
                        style="max-width: 100%; height: auto;">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <a type="button" href="{{ investigacion.imagen_extra_3.url }}" class="btn btn-success"
                        download>Descargar</a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

</section>
{% endfor %}
{% endif %}
{% endfor %}

<!-- Sistema de notificaciones Toast -->
{% for message in messages %}
{% if message.tags == 'error' %}
<div class="toast align-items-center bg-danger text-white border-0 mt-1 me-1" role="alert" aria-live="assertive"
    aria-atomic="true" id="errorToast" style="position: absolute; top: 60px; right: 10px; z-index: 1000;">
    <div class="d-flex">
        <div class="toast-body">
            <i class="fa-solid fa-circle-info"></i>
            {{ message }}
        </div>
        <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var errorToast = new bootstrap.Toast(document.getElementById('errorToast'));
        errorToast.show();
    });
</script>
{% elif message.tags == 'success' %}
<div class="toast align-items-center bg-success text-white border-0 mt-1 me-1" role="alert" aria-live="assertive"
    aria-atomic="true" id="successToast" style="position: absolute; top: 60px; right: 10px; z-index: 1000;">
    <div class="d-flex">
        <div class="toast-body">
            <i class="fa-solid fa-check"></i>
            {{ message }}
        </div>
        <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var successToast = new bootstrap.Toast(document.getElementById('successToast'));
        successToast.show();
    });
</script>
{% endif %}
{% endfor %}

<!-- Botón de subir -->
<button id="btn-subir" class="btn btn-dark border-1 border-secondary shadow rounded-pill" onclick="subirArriba()"><i
        class="fa-solid fa-arrow-up"></i></button>

<script>
    // Mostrar u ocultar el botón cuando el usuario se desplace hacia abajo
    window.onscroll = function () { scrollFunction() };
    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("btn-subir").style.display = "block";
        } else {
            document.getElementById("btn-subir").style.display = "none";
        }
    }

    // Desplazar la página hacia arriba cuando se hace clic en el botón
    function subirArriba() {
        document.body.scrollTop = 0; // Para Safari
        document.documentElement.scrollTop = 0; // Para Chrome, Firefox, IE y Opera
    }
</script>

{% endblock %}